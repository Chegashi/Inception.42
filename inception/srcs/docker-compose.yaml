version: '3'
services:
    nginx:
        build : requirements/nginx/.
        ports:
            - '80:80'
        volumes:
            - WordPress:/var/www/html/
        depends_on:
            - wordpress
        restart: always
    mariadb:
        image: mariadb
        build:
            context: ./requirements/mariadb/.  
            args:
                - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
                - MYSQL_USER=${MYSQL_USER}
                - MYSQL_PASSWORD=${MYSQL_PASSWORD}
                - DB_NAME=${DB_NAME}
                - MYSQL_DATABASE=${MYSQL_DATABASE}
                - WP_NAME=${WP_NAME}
                - DB_HOST=${DB_HOST}
        ports:
            - '3306:3306'
        volumes:
            - DB:/var/lib/mysql
        restart: always
    wordpress:
        image: mariadb
        build:
            context: requirements/WordPress/.
        ports:
            - '9000:9000'
        volumes:
            - WordPress:/var/www/html/
        depends_on:
            - mariadb
        restart: always
volumes:
    WordPress:
        name : WordPress
        driver: local
        driver_opts:
            type: none
            o: bind
            device: /home/mochegri/data/WordPress
    DB:
        name : DB
        driver: local
        driver_opts:
            type: none
            o: bind
            device:  /home/mochegri/data/DB
    # phpmyadmin:
    #     build: requirements/phpmyadmin/.
    #     ports:
    #         - '9000:9000'
    #     volumes:
    #         - WordPress:/var/www/html/
    #     links:
    #         - mariadb
    #     restart: always
    # adminer:
    #     build: requirements/adminer/.
    #     ports:
    #         - '9000:9000'
    #     volumes:
    #         - WordPress:/var/www/html/
    #     links:
    #         - mariadb
    #     restart: always
    # ftp:
    #     build: requirements/adminer/.
    #     ports:
    #         - '9000:9000'
    #     volumes:
    #         - WordPress:/var/www/html/
    #     links:
    #         - mariadb
    #     restart: always
    # site:
    #     build: requirements/adminer/.
    #     ports:
    #         - '9000:9000'
    #     volumes:
    #         - WordPress:/var/www/html/
    #     links:
    #         - mariadb
    #     restart: always
